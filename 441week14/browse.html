<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RTO Course Platform</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header class="app-header">
        <div class="container">
            <h1 class="app-title">RTO Course Platform</h1>
            <nav class="main-nav">
                <div class="logo">
                    <img src="logo.png" alt="RTO Course Platform Logo">
                </div>
                <a href="index.html" class="nav-link">Home</a>
                <a href="cart.html" class="nav-link">My Courses</a>
                <a href="check.html" class="nav-link">Checkout</a>
                <a href="browse.html" class="nav-link active">Browse Courses</a>
                <div id="user-greeting" class="user-greeting"></div>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="banner-container">
            <img src="images/banner.png" alt="Browse Courses Banner" class="banner-image">
        </div>

        <section class="browse-intro">
            <div class="browse-info">
                <h2>Welcome to RTO Course Platform</h2>
                <p>Explore our wide range of accredited vocational courses designed to empower your career. Whether you're looking to advance in IT, Business, Health, or Construction, we have the right course for you.</p>
            </div>
        </section>

        <section class="product-grid-section">
            <h2>Available Courses</h2>
            <div class="product-grid" id="product-list">
                <!-- Product cards will be dynamically inserted here by JavaScript -->
            </div>
        </section>

    </div>

    <footer class="app-footer">
        <p>Created by Colin</p>
    </footer>

    <script src="script.js"></script>
    <script>
        // Ensure this script runs after the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', function () {
            // Check if user is logged in
            const user = JSON.parse(localStorage.getItem('currentUser')) || JSON.parse(sessionStorage.getItem('currentUser'));
            if (user) {
                document.getElementById('user-greeting').textContent = `Welcome, ${user.username}!`;
                // Optionally, you can redirect logged-in users to their dashboard or another page
                // Example:
                // window.location.href = 'dashboard.html';
            } else {
                document.getElementById('user-greeting').textContent = '';
            }

            // Load products dynamically
            loadProducts();
        });

        // Function to load products from localStorage or fallback data
        function loadProducts() {
            let products = JSON.parse(localStorage.getItem('products')) || [];

            displayProducts(products);
        }

        // Function to display products in the grid
        function displayProducts(products) {
            const productList = document.getElementById('product-list');
            if (!productList) return;

            productList.innerHTML = ''; // Clear existing content

            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <div class="product-selector">
                        <!-- No checkbox for browsing -->
                    </div>
                    <img src="images/${product.image}" alt="${product.name}">
                    <h3>${product.name}</h3>
                    <p class="description">${product.description}</p>
                    <p class="price">$${product.price.toFixed(2)}</p>
                    <button class="view-details" data-id="${product.id}">View Details</button>
                `;
                productList.appendChild(productCard);
            });

            // Add event listeners for "View Details" buttons
            const viewDetailsButtons = document.querySelectorAll('.view-details');
            viewDetailsButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const productId = parseInt(this.getAttribute('data-id'));
                    // Redirect to a product detail page or show a modal with details
                    // For simplicity, we'll alert the product name here
                    const product = products.find(p => p.id === productId);
                    if (product) {
                        alert(`Product Details for ${product.name}\n\n${product.description}\nPrice: $${product.price.toFixed(2)}`);
                        // Alternatively, navigate to a detail page:
                        // window.location.href = `product-detail.html?id=${productId}`;
                    }
                });
            });
        }
    </script>
</body>

</html>